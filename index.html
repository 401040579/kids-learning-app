<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#FF69B4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">
  <title>宝贝学习乐园</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- 星星/彩带飘落效果容器 -->
  <div id="particles"></div>

  <!-- 奖励弹窗 -->
  <div id="reward-popup" class="reward-popup hidden">
    <div class="reward-content">
      <div class="reward-stars">⭐⭐⭐</div>
      <h2 class="reward-title">太棒了!</h2>
      <p class="reward-message">你获得了 <span id="reward-points">10</span> 分!</p>
      <div class="reward-animation"></div>
      <button class="btn-continue" onclick="closeReward()">继续学习</button>
    </div>
  </div>

  <!-- 视频播放器弹窗 -->
  <div id="video-modal" class="video-modal hidden">
    <div class="video-container">
      <button class="video-close" onclick="closeVideo()">✕</button>
      <div id="video-player"></div>
      <div id="video-overlay" class="video-overlay hidden">
        <div class="overlay-content">
          <span class="overlay-emoji">🌟</span>
          <p>视频看完啦!</p>
          <button class="btn-primary" onclick="closeVideo()">返回</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 主应用 -->
  <div id="app">
    <!-- 顶部状态栏 -->
    <header class="header">
      <div class="header-left">
        <span class="app-title">🌈 学习乐园</span>
      </div>
      <div class="header-right">
        <div class="score-display">
          <span class="star-icon">⭐</span>
          <span id="total-score">0</span>
        </div>
      </div>
    </header>

    <!-- 页面内容区 -->
    <main id="main-content">
      <!-- 首页 -->
      <section id="page-home" class="page active">
        <div class="welcome-section">
          <h1 class="welcome-title">
            <span class="wave">👋</span> 欢迎小朋友!
          </h1>
          <p class="welcome-subtitle">今天想学什么呢?</p>
        </div>

        <div class="menu-grid">
          <div class="menu-card card-explore" onclick="navigateTo('explore')">
            <div class="card-icon">🎬</div>
            <div class="card-title">探索视频</div>
            <div class="card-desc">看有趣的视频</div>
          </div>

          <div class="menu-card card-math" onclick="navigateTo('math')">
            <div class="card-icon">🔢</div>
            <div class="card-title">数学游戏</div>
            <div class="card-desc">加减法挑战</div>
          </div>

          <div class="menu-card card-english" onclick="navigateTo('english')">
            <div class="card-icon">🔤</div>
            <div class="card-title">学英语</div>
            <div class="card-desc">字母和单词</div>
          </div>

          <div class="menu-card card-chinese" onclick="navigateTo('chinese')">
            <div class="card-icon">📝</div>
            <div class="card-title">学中文</div>
            <div class="card-desc">认字和拼音</div>
          </div>

          <div class="menu-card card-timer" onclick="navigateTo('timer')">
            <div class="card-icon">⏰</div>
            <div class="card-title">玩耍计时</div>
            <div class="card-desc">设置倒计时</div>
          </div>

          <div class="menu-card card-profile" onclick="navigateTo('profile')">
            <div class="card-icon">👤</div>
            <div class="card-title">我的信息</div>
            <div class="card-desc">编辑个人资料</div>
          </div>
        </div>

        <div class="daily-progress">
          <h3>今日进度</h3>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
          </div>
          <p class="progress-text">完成 <span id="tasks-done">0</span>/10 个任务解锁奖励视频!</p>
        </div>
      </section>

      <!-- 探索视频页 -->
      <section id="page-explore" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>🎬 探索视频</h2>
        </div>

        <!-- 分类标签 -->
        <div class="category-tabs" id="category-tabs">
          <button class="category-tab active" data-category="all" onclick="filterVideos('all')">
            <span class="tab-icon">📚</span>
            <span class="tab-name">全部</span>
          </button>
          <button class="category-tab" data-category="math" onclick="filterVideos('math')">
            <span class="tab-icon">🔢</span>
            <span class="tab-name">数学</span>
          </button>
          <button class="category-tab" data-category="english" onclick="filterVideos('english')">
            <span class="tab-icon">🔤</span>
            <span class="tab-name">英语</span>
          </button>
          <button class="category-tab" data-category="science" onclick="filterVideos('science')">
            <span class="tab-icon">🔬</span>
            <span class="tab-name">科普</span>
          </button>
          <button class="category-tab" data-category="emotion" onclick="filterVideos('emotion')">
            <span class="tab-icon">💝</span>
            <span class="tab-name">情绪</span>
          </button>
          <button class="category-tab" data-category="brain" onclick="filterVideos('brain')">
            <span class="tab-icon">🧠</span>
            <span class="tab-name">脑力</span>
          </button>
          <button class="category-tab" data-category="music" onclick="filterVideos('music')">
            <span class="tab-icon">🎵</span>
            <span class="tab-name">音乐</span>
          </button>
        </div>

        <!-- 当前分类描述 -->
        <div class="category-info" id="category-info">
          <p class="category-desc">精选30个适合6岁儿童的优质视频</p>
        </div>

        <!-- 视频网格 -->
        <div class="video-grid" id="video-grid">
          <!-- 视频卡片由 JS 动态生成 -->
        </div>
      </section>

      <!-- 视频详情弹窗 -->
      <div id="video-detail-modal" class="video-detail-modal hidden">
        <div class="video-detail-content">
          <button class="video-detail-close" onclick="closeVideoDetail()">✕</button>
          <div class="video-detail-header">
            <span class="video-detail-icon" id="detail-icon">🎬</span>
            <div class="video-detail-title-area">
              <h3 id="detail-title">视频标题</h3>
              <p id="detail-title-zh" class="detail-title-zh">中文标题</p>
            </div>
          </div>
          <div class="video-detail-meta">
            <span class="meta-tag" id="detail-duration">⏱️ 5:00</span>
            <span class="meta-tag" id="detail-channel">📺 频道</span>
            <span class="meta-tag" id="detail-age">👶 5-7岁</span>
          </div>
          <div class="video-detail-section">
            <h4>📖 简介</h4>
            <p id="detail-desc">视频描述</p>
          </div>
          <div class="video-detail-section">
            <h4>✅ 为什么推荐</h4>
            <p id="detail-why">推荐理由</p>
          </div>
          <div class="video-detail-section">
            <h4>🎯 技能培养</h4>
            <div class="skill-tags" id="detail-skills">
              <!-- 技能标签由 JS 生成 -->
            </div>
          </div>
          <div class="video-detail-section parent-tip">
            <h4>💡 家长贴士</h4>
            <p id="detail-parent-tip">给家长的建议</p>
          </div>
          <button class="btn-play-video" id="btn-play-detail" onclick="playVideoFromDetail()">
            ▶️ 播放视频
          </button>
        </div>
      </div>

      <!-- 数学游戏页 -->
      <section id="page-math" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>🔢 数学游戏</h2>
        </div>
        <div class="game-area">
          <div class="math-question">
            <span id="num1">3</span>
            <span id="operator">+</span>
            <span id="num2">2</span>
            <span>=</span>
            <span class="answer-box">?</span>
          </div>
          <div class="answer-options" id="math-options">
            <!-- 动态生成选项 -->
          </div>
          <div class="math-stats">
            <span>正确: <span id="math-correct">0</span></span>
            <span>连续答对: <span id="math-streak">0</span> 🔥</span>
          </div>
        </div>
      </section>

      <!-- 英语学习页 -->
      <section id="page-english" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>🔤 学英语</h2>
        </div>
        <div class="game-area">
          <div class="word-display">
            <div class="word-image" id="english-image">🍎</div>
            <div class="word-text" id="english-word">Apple</div>
            <button class="btn-sound" onclick="speakWord()">🔊 听发音</button>
          </div>
          <p class="question-text">这是什么?</p>
          <div class="answer-options" id="english-options">
            <!-- 动态生成选项 -->
          </div>
        </div>
      </section>

      <!-- 中文学习页 -->
      <section id="page-chinese" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>📝 学中文</h2>
        </div>
        <div class="game-area">
          <div class="character-display">
            <div class="big-character" id="chinese-char">大</div>
            <div class="pinyin" id="chinese-pinyin">dà</div>
          </div>
          <p class="question-text">选择正确的意思:</p>
          <div class="answer-options" id="chinese-options">
            <!-- 动态生成选项 -->
          </div>
        </div>
      </section>

      <!-- 倒计时页面 -->
      <section id="page-timer" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>⏰ 玩耍倒计时</h2>
        </div>

        <div class="timer-container">
          <!-- 倒计时显示 -->
          <div class="timer-display" id="timer-display">
            <div class="timer-circle" id="timer-circle">
              <svg class="timer-svg" viewBox="0 0 200 200">
                <circle class="timer-bg" cx="100" cy="100" r="90"/>
                <circle class="timer-progress" id="timer-progress" cx="100" cy="100" r="90"/>
              </svg>
              <div class="timer-text">
                <span class="timer-minutes" id="timer-minutes">05</span>
                <span class="timer-colon">:</span>
                <span class="timer-seconds" id="timer-seconds">00</span>
              </div>
              <div class="timer-emoji" id="timer-emoji">🎮</div>
            </div>
          </div>

          <!-- 时间选择（未开始时显示） -->
          <div class="timer-setup" id="timer-setup">
            <p class="timer-hint">选择玩耍时间:</p>
            <div class="time-options">
              <button class="time-btn" onclick="setTimerMinutes(3)">
                <span class="time-num">3</span>
                <span class="time-unit">分钟</span>
              </button>
              <button class="time-btn active" onclick="setTimerMinutes(5)">
                <span class="time-num">5</span>
                <span class="time-unit">分钟</span>
              </button>
              <button class="time-btn" onclick="setTimerMinutes(10)">
                <span class="time-num">10</span>
                <span class="time-unit">分钟</span>
              </button>
              <button class="time-btn" onclick="setTimerMinutes(15)">
                <span class="time-num">15</span>
                <span class="time-unit">分钟</span>
              </button>
            </div>
            <button class="btn-start-timer" onclick="startTimer()">
              ▶️ 开始倒计时
            </button>
          </div>

          <!-- 控制按钮（运行中显示） -->
          <div class="timer-controls hidden" id="timer-controls">
            <button class="timer-control-btn btn-pause" id="btn-pause" onclick="togglePauseTimer()">
              ⏸️ 暂停
            </button>
            <button class="timer-control-btn btn-stop" onclick="stopTimer()">
              ⏹️ 结束
            </button>
          </div>

          <!-- 鼓励语 -->
          <div class="timer-message" id="timer-message">
            <p>玩得开心！时间到了要乖乖走哦~ 🌟</p>
          </div>
        </div>
      </section>

      <!-- 时间到弹窗 -->
      <div id="timer-finish-modal" class="timer-finish-modal hidden">
        <div class="timer-finish-content">
          <div class="finish-emoji">⏰</div>
          <h2 class="finish-title">时间到啦!</h2>
          <p class="finish-message">玩得开心吗？现在该回家咯~ 🏠</p>
          <div class="finish-animation">
            <span>🌈</span><span>⭐</span><span>🎉</span>
          </div>
          <button class="btn-finish-ok" onclick="closeTimerFinish()">
            好的，我知道了 👋
          </button>
        </div>
      </div>

      <!-- 个人信息页面 -->
      <section id="page-profile" class="page">
        <div class="page-header">
          <button class="btn-back" onclick="navigateTo('home')">← 返回</button>
          <h2>👤 我的信息</h2>
        </div>

        <div class="profile-container">
          <!-- 头像区域 -->
          <div class="profile-avatar-section">
            <div class="avatar-wrapper" onclick="showPhotoOptions()">
              <img id="profile-avatar" class="profile-avatar" src="" alt="头像">
              <div class="avatar-placeholder" id="avatar-placeholder">
                <span>📷</span>
                <span class="avatar-hint">点击添加照片</span>
              </div>
              <div class="avatar-edit-icon">📷</div>
            </div>
          </div>

          <!-- 个人信息表单 -->
          <div class="profile-form">
            <div class="form-group">
              <label class="form-label">
                <span class="label-icon">👶</span>
                <span>我的名字</span>
              </label>
              <input type="text" id="profile-name" class="form-input" placeholder="输入你的名字" maxlength="20">
            </div>

            <div class="form-group">
              <label class="form-label">
                <span class="label-icon">🎂</span>
                <span>我的年龄</span>
              </label>
              <div class="age-selector">
                <button class="age-btn" onclick="changeAge(-1)">－</button>
                <span class="age-display" id="profile-age">6</span>
                <span class="age-unit">岁</span>
                <button class="age-btn" onclick="changeAge(1)">＋</button>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                <span class="label-icon">🎈</span>
                <span>生日</span>
              </label>
              <input type="date" id="profile-birthday" class="form-input">
            </div>

            <div class="form-group">
              <label class="form-label">
                <span class="label-icon">💖</span>
                <span>我喜欢的事情</span>
              </label>
              <div class="hobbies-grid" id="hobbies-grid">
                <button class="hobby-tag" data-hobby="画画" onclick="toggleHobby(this)">🎨 画画</button>
                <button class="hobby-tag" data-hobby="唱歌" onclick="toggleHobby(this)">🎤 唱歌</button>
                <button class="hobby-tag" data-hobby="跳舞" onclick="toggleHobby(this)">💃 跳舞</button>
                <button class="hobby-tag" data-hobby="运动" onclick="toggleHobby(this)">⚽ 运动</button>
                <button class="hobby-tag" data-hobby="看书" onclick="toggleHobby(this)">📚 看书</button>
                <button class="hobby-tag" data-hobby="积木" onclick="toggleHobby(this)">🧱 积木</button>
                <button class="hobby-tag" data-hobby="恐龙" onclick="toggleHobby(this)">🦖 恐龙</button>
                <button class="hobby-tag" data-hobby="动物" onclick="toggleHobby(this)">🐱 动物</button>
                <button class="hobby-tag" data-hobby="汽车" onclick="toggleHobby(this)">🚗 汽车</button>
                <button class="hobby-tag" data-hobby="公主" onclick="toggleHobby(this)">👸 公主</button>
                <button class="hobby-tag" data-hobby="太空" onclick="toggleHobby(this)">🚀 太空</button>
                <button class="hobby-tag" data-hobby="美食" onclick="toggleHobby(this)">🍰 美食</button>
              </div>
            </div>

            <button class="btn-save-profile" onclick="saveProfile()">
              💾 保存信息
            </button>
          </div>
        </div>
      </section>

      <!-- 照片选项弹窗 -->
      <div id="photo-options-modal" class="photo-options-modal hidden">
        <div class="photo-options-content">
          <h3>选择照片来源</h3>
          <div class="photo-options-buttons">
            <button class="photo-option-btn" onclick="takePhoto()">
              <span class="option-icon">📸</span>
              <span>拍照</span>
            </button>
            <button class="photo-option-btn" onclick="choosePhoto()">
              <span class="option-icon">🖼️</span>
              <span>从相册选择</span>
            </button>
          </div>
          <button class="photo-cancel-btn" onclick="closePhotoOptions()">取消</button>
        </div>
      </div>

      <!-- 隐藏的文件输入 -->
      <input type="file" id="photo-input-camera" accept="image/*" capture="user" style="display:none" onchange="handlePhotoSelect(event)">
      <input type="file" id="photo-input-gallery" accept="image/*" style="display:none" onchange="handlePhotoSelect(event)">
    </main>

    <!-- 底部导航 -->
    <nav class="bottom-nav">
      <div class="nav-item active" onclick="navigateTo('home')">
        <span class="nav-icon">🏠</span>
        <span class="nav-label">首页</span>
      </div>
      <div class="nav-item" onclick="navigateTo('explore')">
        <span class="nav-icon">🎬</span>
        <span class="nav-label">视频</span>
      </div>
      <div class="nav-item" onclick="navigateTo('math')">
        <span class="nav-icon">🔢</span>
        <span class="nav-label">数学</span>
      </div>
      <div class="nav-item" onclick="navigateTo('english')">
        <span class="nav-icon">🔤</span>
        <span class="nav-label">英语</span>
      </div>
      <div class="nav-item" onclick="navigateTo('chinese')">
        <span class="nav-icon">📝</span>
        <span class="nav-label">中文</span>
      </div>
    </nav>
  </div>

  <script src="js/rewards.js"></script>
  <script src="js/videos.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
